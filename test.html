<html lang="en-us">
<head>
  <script src="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/1.9.0/js/okta-sign-in.min.js" type="text/javascript"></script>
  <link href="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/1.9.0/css/okta-sign-in.min.css" type="text/css" rel="stylesheet">
  <!-- Optional, customizable css theme options. Link your own customized copy of this file or override styles in-line -->
  <link href="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/1.9.0/css/okta-theme.css" type="text/css" rel="stylesheet">
</head>
<body>
<div id="widget-container"></div>

<script>
var signIn = new OktaSignIn({
 baseUrl: 'https://tronaru.oktapreview.com',
 clientId: '0oajt0ih8hpauWWo10h7',
 redirectUri: 'https://tronaru.github.io',
 authParams: {
   issuer: 'default',
   responseType: ['id_token','token'],
   display: 'page'
 }
});

if (!signIn.token.hasTokensInUrl()) {
 signIn.renderEl({el: '#widget-container'},
   function() {},
   function(err) { console.err(err) });
}

else {
 signIn.token.parseTokensFromUrl(
   function success(res) {
     // Add the token to tokenManager to automatically renew the token when needed
     signIn.tokenManager.add('id_token', res[0]);
     signIn.tokenManager.add('access_token', res[1]);
   },
   function error(err) {
     console.log('handle error', err);
   }
 );
}

  signIn.session.get(function (res) {
  // Session exists, show logged in state.
  if (res.status === 'ACTIVE') {
    console.log('Success!');
  }
  // No session, or error retrieving the session. Render the Sign-In Widget.
  else if (res.status === 'INACTIVE') {
    signIn.renderEl({
        el: '#widget-container'
      },
      function success(res) {
 signInSuccessCallBackFunction(res);
      },
      function error(err) {
        handleError(err);
      }
    );
  }
});
  // The user can be in another authentication state that requires further action.
    // For more information about these states, see:
    //   https://github.com/okta/okta-signin-widget#rendereloptions-success-error
</script>
</script>
  </body>
</html>
